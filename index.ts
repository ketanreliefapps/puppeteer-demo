import puppeteer from 'puppeteer';
async function generatePdf() {
    const browser = await puppeteer.launch({args: [
        "--no-sandbox",
        "--window-size=2720,1080",
      ],headless: false});
    const page = await browser.newPage();
    //await page.setRequestInterception(true)
    
    //await page.goto('http://localhost:4200/applications');
    
    await page.evaluateOnNewDocument(async () => {
        localStorage.clear();
        localStorage.setItem('idtoken', 'eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJxcVFRZElCNzFxaFpWbDBiSXo5OFd2R1VqaHk3TlR5Q1g1U3ZPRVhya29jIn0.eyJleHAiOjE2NzUzNDg0MTcsImlhdCI6MTY3NTM0NjYxNywiYXV0aF90aW1lIjoxNjc1MzMxMjc3LCJqdGkiOiI5ZjJmOTQwMC02YzM1LTQwYmEtYTQ3OS0yZTRkMjRhMGRlYWEiLCJpc3MiOiJodHRwczovL2lkLWRldi5vb3J0Y2xvdWQudGVjaC9hdXRoL3JlYWxtcy9vb3J0IiwiYXVkIjoib29ydC1jbGllbnQiLCJzdWIiOiJmODBmNGMyZS01YjVkLTQwZmYtOTY0OS05Njc1MDc2MmNiYjEiLCJ0eXAiOiJJRCIsImF6cCI6Im9vcnQtY2xpZW50Iiwibm9uY2UiOiJaMEpTVUZCc2NIZDNVRmRKVXpKcE5qQkhMVTl4VHkxVlRuRkNTR2h0TG1sSGVYZEJPRlZGV1U1bWREVlAiLCJzZXNzaW9uX3N0YXRlIjoiOGY4NDc0NzQtNzFlYy00ZTkwLWExNDgtM2FiNThhODdhYTY0IiwiYXRfaGFzaCI6ImQtWGMzYnBObUtTZHRnbmxwaTlWX0EiLCJhY3IiOiIxIiwic2lkIjoiOGY4NDc0NzQtNzFlYy00ZTkwLWExNDgtM2FiNThhODdhYTY0IiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm5hbWUiOiJrZXRhbiBtb2RpIiwicHJlZmVycmVkX3VzZXJuYW1lIjoia2V0YW4ucmVsaWVmYXBwc0BnbWFpbC5jb20iLCJnaXZlbl9uYW1lIjoia2V0YW4iLCJmYW1pbHlfbmFtZSI6Im1vZGkiLCJlbWFpbCI6ImtldGFuLnJlbGllZmFwcHNAZ21haWwuY29tIn0.ee8eEqVZxBpLVwvhlf9--IxUBLdCcB-wvysRq4FKTUETfZNy4EO0njtsXkTA8sIRWinjc5Vx0EWfX127FFU8n7GAfJHsYPAvBaHUvWXgCjIPI7GJ2CuP6e8YTKaxP7MreEqT52JF9DDWomsbTwA93ZadSsZN2IvwCosN9XjyuFJGxSp10XUsuYQ1e5isovfDw15hYhwd-8PVQkluW-HSxhW0Wnm3rWEXyXM96_vtIMc_kvfPkhko2d4io__0eiSbms8WdLHgeoOzmeNMgBt7pJBmzD0w5Qb__8_Kk3P2g6wgiPGKpbntNxfvnvreXFpdbjCP0L4TQn5K8upsDrtYhA');
        localStorage.setItem('access_token', 'eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJxcVFRZElCNzFxaFpWbDBiSXo5OFd2R1VqaHk3TlR5Q1g1U3ZPRVhya29jIn0.eyJleHAiOjE2NzUzNDg0MTcsImlhdCI6MTY3NTM0NjYxNywiYXV0aF90aW1lIjoxNjc1MzMxMjc3LCJqdGkiOiI0YTAwZTRhMS0yMmYyLTQzNTItOGJkMC0yZGIzMzA0Yzg0NGQiLCJpc3MiOiJodHRwczovL2lkLWRldi5vb3J0Y2xvdWQudGVjaC9hdXRoL3JlYWxtcy9vb3J0IiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImY4MGY0YzJlLTViNWQtNDBmZi05NjQ5LTk2NzUwNzYyY2JiMSIsInR5cCI6IkJlYXJlciIsImF6cCI6Im9vcnQtY2xpZW50Iiwibm9uY2UiOiJaMEpTVUZCc2NIZDNVRmRKVXpKcE5qQkhMVTl4VHkxVlRuRkNTR2h0TG1sSGVYZEJPRlZGV1U1bWREVlAiLCJzZXNzaW9uX3N0YXRlIjoiOGY4NDc0NzQtNzFlYy00ZTkwLWExNDgtM2FiNThhODdhYTY0IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL3dpZGdldHMub29ydGNsb3VkLnRlY2giLCJodHRwOi8vbG9jYWxob3N0OjQyMDEiLCJodHRwczovL29vcnQtZGV2Lm9vcnRjbG91ZC50ZWNoIiwiaHR0cDovL2xvY2FsaG9zdDo0MjAwIiwiaHR0cDovL2xvY2FsaG9zdDozMDAwIiwiaHR0cHM6Ly9kM3J2NG05cGNyOGxnMi5jbG91ZGZyb250Lm5ldCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJkZWZhdWx0LXJvbGVzLW9vcnQiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoib3BlbmlkIGVtYWlsIG9mZmxpbmVfYWNjZXNzIHByb2ZpbGUiLCJzaWQiOiI4Zjg0NzQ3NC03MWVjLTRlOTAtYTE0OC0zYWI1OGE4N2FhNjQiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6ImtldGFuIG1vZGkiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJrZXRhbi5yZWxpZWZhcHBzQGdtYWlsLmNvbSIsImdpdmVuX25hbWUiOiJrZXRhbiIsImZhbWlseV9uYW1lIjoibW9kaSIsImVtYWlsIjoia2V0YW4ucmVsaWVmYXBwc0BnbWFpbC5jb20ifQ.J6Fc8ADkPfjZ_zdD0wAXlesbMlhjdmMOPMKVgJoH_qxlbqKNv2YQQZ-O94h1sV_LJ8GKwOxrP_wsTNVXVqTcFB2jh6_vaGDOM9AXZhalPdTVNRHIfVeY4EN2fQu5gFlUcsD1LNVa706ux5it8WTvAEnOdHeGdPvG4BOAZkFqn9x8JyTDP90ymCcqorarRK6Q68kCl5N5vNhTePzqo9SkZBWjEkCo5QXHrs76VQaq_TAa66Rxoo2Uo_T0NMi4BLsbAr4fCJiiW-8Sg1j63fAmyW0W6dj7Syb6gC-vB3a3vmMH01ILc1rO7cKGSwBKt3SjNDpBH3MZaTxgqnwtx6848Q');
        localStorage.setItem('expires_at', '1675348417574');
        localStorage.setItem('refresh_token', 'eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI2ODIzM2I4YS02ZmY4LTQ1OWItODJjNS0xNTFiYjAwMjliNWMifQ.eyJpYXQiOjE2NzUzNDY2MTcsImp0aSI6IjIzZTUwYzUyLTllMWMtNGEzMy1hZTcxLTlkYzZiMjMxZTU5OCIsImlzcyI6Imh0dHBzOi8vaWQtZGV2Lm9vcnRjbG91ZC50ZWNoL2F1dGgvcmVhbG1zL29vcnQiLCJhdWQiOiJodHRwczovL2lkLWRldi5vb3J0Y2xvdWQudGVjaC9hdXRoL3JlYWxtcy9vb3J0Iiwic3ViIjoiZjgwZjRjMmUtNWI1ZC00MGZmLTk2NDktOTY3NTA3NjJjYmIxIiwidHlwIjoiT2ZmbGluZSIsImF6cCI6Im9vcnQtY2xpZW50Iiwibm9uY2UiOiJaMEpTVUZCc2NIZDNVRmRKVXpKcE5qQkhMVTl4VHkxVlRuRkNTR2h0TG1sSGVYZEJPRlZGV1U1bWREVlAiLCJzZXNzaW9uX3N0YXRlIjoiOGY4NDc0NzQtNzFlYy00ZTkwLWExNDgtM2FiNThhODdhYTY0Iiwic2NvcGUiOiJvcGVuaWQgZW1haWwgb2ZmbGluZV9hY2Nlc3MgcHJvZmlsZSIsInNpZCI6IjhmODQ3NDc0LTcxZWMtNGU5MC1hMTQ4LTNhYjU4YTg3YWE2NCJ9.ppmb4BLCYeTGFCShwmZiyhVqwlnqJ4kXGbF06ynb0ko');
        localStorage.setItem('id_token_expires_at', '1675348417000');
        localStorage.setItem('id_token_stored_at', '1675346617567');
    });    

    await page.goto('http://localhost:4200/applications', { waitUntil: 'load' });
    
    await page.pdf({path: 'output.pdf', format: 'A4'});
    console.log('PDF generate');

    //await browser.close();
}

generatePdf();